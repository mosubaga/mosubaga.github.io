<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bayes' Theorem - Pastel Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header>
    <div class="hero">
      <span class="tagline">Bayes' Theorem in a Pastel Universe</span>
      <h1>Upgrade Your Guessing Game with Bayes' Theorem</h1>
      <p>
        Bayes' Theorem shows how to update what you believe when new evidence arrives.
        Think of it like a smart remix: old beliefs plus fresh clues equals a sharper prediction.
      </p>
      <a class="back-link" href="index.html">Go Back</a>
    </div>
  </header>

  <main>
    <section id="artwork">
      <h2>Visual: Prior, Likelihood, Posterior</h2>
      <p>
        A quick sketch of how beliefs evolve as evidence arrives.
      </p>
      <div id="sketch-bayes" class="sketch-frame"></div>
    </section>

    <section id="explanation">
      <h2>1) Explanation of Bayes' Theorem</h2>
      <p>
        Bayes' Theorem connects what you already think (a prior) with how surprising the new evidence is (likelihood),
        and then normalizes it using all possible ways the evidence could happen (marginal likelihood).
        The result is the posterior, your updated belief.
      </p>

      <div class="formula">
        $$P(A\mid B) = \frac{P(B\mid A) \cdot P(A)}{P(B)}$$
      </div>

      <div class="bayes-grid">
        <div class="bayes-card">
          <strong>Prior probability, $P(A)$</strong>
          This is your starting belief about event $A$ before seeing any new evidence. Example: before taking a test,
          you might believe there is a 1% chance you have a certain disease.
        </div>
        <div class="bayes-card">
          <strong>Likelihood, $P(B\mid A)$</strong>
          This is how likely the evidence $B$ would appear if $A$ were true. It is not the same as the probability of $A$.
          A high likelihood means the evidence fits well with the hypothesis.
          <div class="note">
            Probability asks, "How often does $A$ happen?" Likelihood asks, "If $A$ is true, how often would I see $B$?"
          </div>
        </div>
        <div class="bayes-card">
          <strong>Marginal likelihood, $P(B)$</strong>
          This is the total probability of the evidence $B$ happening under all possible causes. It keeps the equation
          balanced by counting every way the evidence could appear.
        </div>
        <div class="bayes-card">
          <strong>Posterior probability, $P(A\mid B)$</strong>
          This is the updated belief after seeing the evidence. It is the "new and improved" probability that $A$ is true.
        </div>
      </div>
    </section>

    <section id="calculator">
      <h2>2) Interactive Calculator</h2>
      <p>
        Plug in a prior, a likelihood, and a marginal likelihood to compute the posterior probability.
        Use decimals between 0 and 1.
      </p>

      <div class="calculator">
        <div>
          <label for="prior">Prior probability $P(A)$</label>
          <input type="number" id="prior" min="0" max="1" step="0.01" value="0.01" />
        </div>
        <div>
          <label for="likelihood">Likelihood $P(B\mid A)$</label>
          <input type="number" id="likelihood" min="0" max="1" step="0.01" value="0.9" />
          <div class="note">
            Likelihood measures how compatible the evidence is with $A$, not how common $A$ itself is.
          </div>
        </div>
        <div>
          <label for="marginal">Marginal likelihood $P(B)$</label>
          <input type="number" id="marginal" min="0" max="1" step="0.01" value="0.05" />
        </div>
        <div>
          <button type="button" id="calculate">Calculate Posterior</button>
        </div>
        <div class="result" id="result">
          Posterior probability: <strong>$$P(A\mid B) = 0.18$$</strong>
          <div class="note">(With the default values: $\frac{0.9 \cdot 0.01}{0.05} = 0.18$)</div>
        </div>
      </div>
    </section>

    <section id="examples">
      <h2>3) Examples of Bayes' Theorem in Action</h2>
      <div class="examples">
        <div class="example-card">
          <h3>False positives in medical tests</h3>
          <p>
            Suppose a disease affects 1% of people ($P(A)=0.01$). A test is 99% sensitive
            ($P(B\mid A)=0.99$) but has a 5% false positive rate ($P(B\mid \neg A)=0.05$).
            The chance of a positive test overall is
            $$P(B)=0.99\cdot0.01+0.05\cdot0.99=0.0594.$$
            So the chance you actually have the disease after a positive test is
            $$P(A\mid B)=\frac{0.99\cdot0.01}{0.0594}\approx0.1667\;(16.7\%).$$
          </p>
        </div>
        <div class="example-card">
          <h3>Spam detection</h3>
          <p>
            A filter sees the phrase \"free money.\" Suppose $P(A)=0.20$ (20% of emails are spam),
            $P(B\mid A)=0.60$ (spam often contains that phrase), and
            $P(B\mid \neg A)=0.02$ (legit emails rarely do).
            Then
            $$P(B)=0.60\cdot0.20+0.02\cdot0.80=0.136,$$
            and
            $$P(A\mid B)=\frac{0.60\cdot0.20}{0.136}\approx0.8824\;(88.2\%).$$
          </p>
        </div>
        <div class="example-card">
          <h3>Conspiracy theories</h3>
          <p>
            Imagine a person starts with a low prior, $P(A)=0.05$, that a conspiracy is real.
            A dramatic \"clue\" is more likely if it is real ($P(B\mid A)=0.70$) but can still happen
            without it ($P(B\mid \neg A)=0.20$). Then
            $$P(B)=0.70\cdot0.05+0.20\cdot0.95=0.235,$$
            and the updated belief is
            $$P(A\mid B)=\frac{0.70\cdot0.05}{0.235}\approx0.1489\;(14.9\%).$$
          </p>
        </div>
      </div>
    </section>
  </main>

  <script>
    const priorInput = document.getElementById("prior");
    const likelihoodInput = document.getElementById("likelihood");
    const marginalInput = document.getElementById("marginal");
    const result = document.getElementById("result");

    function clampProbability(value) {
      if (Number.isNaN(value)) {
        return 0;
      }
      return Math.min(1, Math.max(0, value));
    }

    function formatNumber(value) {
      return value.toFixed(4).replace(/0+$/, "").replace(/\.$/, "");
    }

    function updatePosterior() {
      const prior = clampProbability(parseFloat(priorInput.value));
      const likelihood = clampProbability(parseFloat(likelihoodInput.value));
      const marginal = clampProbability(parseFloat(marginalInput.value));

      if (marginal === 0) {
        result.innerHTML = "Posterior probability: <strong>Undefined (marginal likelihood is 0)</strong>";
        return;
      }

      const posterior = (likelihood * prior) / marginal;
      const safePosterior = clampProbability(posterior);

      result.innerHTML = `Posterior probability: <strong>$$P(A\\mid B) = ${formatNumber(safePosterior)}$$</strong>`;
      if (window.MathJax && window.MathJax.typesetPromise) {
        window.MathJax.typesetPromise([result]);
      }
    }

    document.getElementById("calculate").addEventListener("click", updatePosterior);
  </script>
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]]
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.min.js"></script>
  <script src="js/bayes-sketch.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</body>
</html>
