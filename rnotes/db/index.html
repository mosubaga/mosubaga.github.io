<!DOCTYPE html><html lang="en" data-astro-cid-iy2nyzpn> <head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v5.15.3"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap" rel="stylesheet"><title>Ruby - DB</title><style>.menu[data-astro-cid-2j44jlrm]{width:100vw;position:fixed;color:#000;top:0;background:linear-gradient(342deg,#fff5f7,#ffb6c1,#ff6b81);padding:.1rem 10px .1rem 1.5rem;z-index:1}.menu[data-astro-cid-2j44jlrm] ul[data-astro-cid-2j44jlrm]{list-style:none;padding:0;display:flex;gap:1rem;justify-content:center}.menu[data-astro-cid-2j44jlrm] a[data-astro-cid-2j44jlrm]{text-decoration:none;color:#e63946;font-weight:700}.menu[data-astro-cid-2j44jlrm] a[data-astro-cid-2j44jlrm]:hover{color:#fff5f7}
body{background:linear-gradient(125deg,#fff9f9,#ffeaea,#ffe3e3);font-family:Fredoka;margin:0;padding:0}h1[data-astro-cid-iy2nyzpn],h2[data-astro-cid-iy2nyzpn],p[data-astro-cid-iy2nyzpn],ul[data-astro-cid-iy2nyzpn]{padding-left:5rem;padding-right:5rem}div[data-astro-cid-iy2nyzpn].container{padding-left:5rem;padding-right:5rem;padding-top:10rem}div[data-astro-cid-iy2nyzpn] code[data-astro-cid-iy2nyzpn]{font-size:14px}.code-example[data-astro-cid-iy2nyzpn]{background:#282a36;color:#68d391;padding:2rem;border-radius:10px;font-family:Courier New,monospace;margin:2rem 5rem;overflow-x:auto}.content-section[data-astro-cid-iy2nyzpn]{background:#fff;border-radius:20px;padding:2.5rem;margin-bottom:2rem;box-shadow:0 10px 40px #0003;animation:fadeInUp .8s ease}.success-box[data-astro-cid-iy2nyzpn]{background:#fff;border-radius:20px;padding:2rem;margin-bottom:2rem;margin-left:5rem;margin-right:5rem;box-shadow:0 10px 40px #0003;animation:fadeInUp .8s ease}
</style></head> <body data-astro-cid-iy2nyzpn> <header data-astro-cid-2j44jlrm> <nav class="menu" data-astro-cid-2j44jlrm> <ul data-astro-cid-2j44jlrm> <li data-astro-cid-2j44jlrm> <a style="font-size: 1.5rem;" href="/rnotes/" data-astro-cid-2j44jlrm> Home </a> </li><li data-astro-cid-2j44jlrm> <a style="font-size: 1.5rem;" href="/rnotes/db" data-astro-cid-2j44jlrm> DB </a> </li><li data-astro-cid-2j44jlrm> <a style="font-size: 1.5rem;" href="/rnotes/requests" data-astro-cid-2j44jlrm> Request </a> </li><li data-astro-cid-2j44jlrm> <a style="font-size: 1.5rem;" href="/rnotes/json" data-astro-cid-2j44jlrm> JSON </a> </li> </ul> </nav> </header>  <div class="container" data-astro-cid-iy2nyzpn> <main data-astro-cid-iy2nyzpn> <section class="content-section" data-astro-cid-iy2nyzpn> <h2 data-astro-cid-iy2nyzpn>Install MySQL Gem</h2> <p style="font-size: 1.1rem; margin-bottom: 1rem;" data-astro-cid-iy2nyzpn>Ruby uses the <strong data-astro-cid-iy2nyzpn>mysql2</strong> gem to connect to MySQL databases. It's fast, efficient, and actively maintained.</p> <div class="code-example" data-astro-cid-iy2nyzpn>gem install mysql2</div> </section> <section class="content-section" data-astro-cid-iy2nyzpn> <h2 data-astro-cid-iy2nyzpn>Basic Connection</h2> <p style="font-size: 1.1rem; margin-bottom: 1rem;" data-astro-cid-iy2nyzpn>Here's how to establish a basic connection to MySQL:</p> <div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-astro-cid-iy2nyzpn data-language="ruby"><code><span class="line"><span style="color:#F97583">require</span><span style="color:#9ECBFF"> 'mysql2'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Create a client connection&#x3C;</span></span>
<span class="line"><span style="color:#FFAB70">client</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> Mysql2</span><span style="color:#E1E4E8">::</span><span style="color:#79B8FF">Client</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span><span style="color:#E1E4E8">( </span><span style="color:#79B8FF">host:</span><span style="color:#9ECBFF"> "localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">username:</span><span style="color:#9ECBFF"> "your_username"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password:</span><span style="color:#9ECBFF"> "your_password"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">database:</span><span style="color:#9ECBFF"> "your_database"</span><span style="color:#E1E4E8"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Test the connection&#x3C;</span></span>
<span class="line"><span style="color:#79B8FF">puts</span><span style="color:#9ECBFF"> "Connected to MySQL successfully!"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Close the connection</span></span>
<span class="line"><span style="color:#E1E4E8">client.</span><span style="color:#B392F0">close</span></span></code></pre> </code> </div> <div class="success-box" data-astro-cid-iy2nyzpn> <strong data-astro-cid-iy2nyzpn>✅ Connection Parameters Explained:</strong> <ul style="margin-top: 1rem; margin-left: 1.5rem;" data-astro-cid-iy2nyzpn> <li data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>host:</strong> Server address (localhost, IP, or domain)</li> <li data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>username:</strong> MySQL user with appropriate permissions</li> <li data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>password:</strong> User's password</li> <li data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>database:</strong> Name of the database to connect to</li> </ul> </div> </section> <section class="content-section" data-astro-cid-iy2nyzpn> <h2 data-astro-cid-iy2nyzpn>Advanced Connection Options</h2> <div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn>
require 'mysql2'<br data-astro-cid-iy2nyzpn>
client = Mysql2::Client.new( host: "localhost", username: "myuser", password: "mypassword", database: "mydb", port: 3306, encoding: 'utf8mb4', read_timeout: 60, write_timeout: 60, connect_timeout: 10, reconnect: true )<br data-astro-cid-iy2nyzpn> </code> </div> </section> <section class="content-section" data-astro-cid-iy2nyzpn> <h2 data-astro-cid-iy2nyzpn>Executing Queries</h2> <p data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>SELECT</strong> statement:</p> <div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-astro-cid-iy2nyzpn data-language="ruby"><code><span class="line"><span style="color:#F97583">require</span><span style="color:#9ECBFF"> 'mysql2'</span></span>
<span class="line"><span style="color:#FFAB70">client</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> Mysql2</span><span style="color:#E1E4E8">::</span><span style="color:#79B8FF">Client</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span><span style="color:#E1E4E8">( </span><span style="color:#79B8FF">host:</span><span style="color:#9ECBFF"> "localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">username:</span><span style="color:#9ECBFF"> "root"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password:</span><span style="color:#9ECBFF"> "password"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">database:</span><span style="color:#9ECBFF"> "test_db"</span><span style="color:#E1E4E8"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Execute SELECT query</span></span>
<span class="line"><span style="color:#FFAB70">results</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> client.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"SELECT * FROM users"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Iterate through results</span></span>
<span class="line"><span style="color:#E1E4E8">results.</span><span style="color:#B392F0">each</span><span style="color:#F97583"> do</span><span style="color:#E1E4E8"> |row|</span></span>
<span class="line"><span style="color:#79B8FF">  puts</span><span style="color:#9ECBFF"> "ID: </span><span style="color:#9ECBFF">#{row[</span><span style="color:#9ECBFF">'id'</span><span style="color:#9ECBFF">]}</span><span style="color:#9ECBFF">, Name: </span><span style="color:#9ECBFF">#{row[</span><span style="color:#9ECBFF">'name'</span><span style="color:#9ECBFF">]}</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#F97583">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">client.</span><span style="color:#B392F0">close</span></span></code></pre> </code> </div> <p data-astro-cid-iy2nyzpn><strong data-astro-cid-iy2nyzpn>INSERT</strong> statement:</p> <div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-astro-cid-iy2nyzpn data-language="ruby"><code><span class="line"></span>
<span class="line"><span style="color:#F97583">require</span><span style="color:#9ECBFF"> 'mysql2'</span></span>
<span class="line"><span style="color:#FFAB70">client</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> Mysql2</span><span style="color:#E1E4E8">::</span><span style="color:#79B8FF">Client</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span><span style="color:#E1E4E8">( </span><span style="color:#79B8FF">host:</span><span style="color:#9ECBFF"> "localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">username:</span><span style="color:#9ECBFF"> "root"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password:</span><span style="color:#9ECBFF"> "password"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">database:</span><span style="color:#9ECBFF"> "test_db"</span><span style="color:#E1E4E8"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Insert data</span></span>
<span class="line"><span style="color:#E1E4E8">client.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"INSERT INTO users (name, email) VALUES ('John Doe', 'john@example.com')"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Get the last inserted ID</span></span>
<span class="line"><span style="color:#FFAB70">last_id</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> client.</span><span style="color:#B392F0">last_id</span></span>
<span class="line"><span style="color:#79B8FF">puts</span><span style="color:#9ECBFF"> "Inserted user with ID: </span><span style="color:#9ECBFF">#{last_id}</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">client.</span><span style="color:#B392F0">close</span></span></code></pre> </code> </div> <p data-astro-cid-iy2nyzpn>Prepared Statements (Prevent SQL Injection)/p>
</p><div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-astro-cid-iy2nyzpn data-language="ruby"><code><span class="line"><span style="color:#6A737D"># Prepare statement</span></span>
<span class="line"><span style="color:#FFAB70">statement</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> client.</span><span style="color:#B392F0">prepare</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"SELECT * FROM users WHERE email = ?"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Execute with parameters</span></span>
<span class="line"><span style="color:#FFAB70">results</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> statement.</span><span style="color:#B392F0">execute</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"user@example.com"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">results.</span><span style="color:#B392F0">each</span><span style="color:#F97583"> do</span><span style="color:#E1E4E8"> |row|</span></span>
<span class="line"><span style="color:#79B8FF">  puts</span><span style="color:#E1E4E8"> row</span></span>
<span class="line"><span style="color:#F97583">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># Close the statement</span></span>
<span class="line"><span style="color:#E1E4E8">statement.</span><span style="color:#B392F0">close</span></span></code></pre> </code> </div> <p class="warning-box" data-astro-cid-iy2nyzpn> <strong data-astro-cid-iy2nyzpn>⚠️ Security Best Practice:</strong> Always use SSL/TLS for production databases, especially when connecting over the internet.
</p> </section> <section class="content-section" data-astro-cid-iy2nyzpn> <h2 data-astro-cid-iy2nyzpn>Error Handling</h2> <p data-astro-cid-iy2nyzpn>Proper error handling is crucial for robust database applications:</p> <div class="code-example" data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <code data-astro-cid-iy2nyzpn> <pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-astro-cid-iy2nyzpn data-language="ruby"><code><span class="line"><span style="color:#F97583">require</span><span style="color:#9ECBFF"> 'mysql2'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFAB70">client</span><span style="color:#F97583"> =</span><span style="color:#79B8FF"> Mysql2</span><span style="color:#E1E4E8">::</span><span style="color:#79B8FF">Client</span><span style="color:#E1E4E8">.</span><span style="color:#F97583">new</span><span style="color:#E1E4E8">( </span><span style="color:#79B8FF">host:</span><span style="color:#9ECBFF"> "localhost"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">username:</span><span style="color:#9ECBFF"> "root"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">password:</span><span style="color:#9ECBFF"> "password"</span><span style="color:#E1E4E8">, </span><span style="color:#79B8FF">database:</span><span style="color:#9ECBFF"> "test_db"</span><span style="color:#E1E4E8"> )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFAB70">results</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> client.</span><span style="color:#B392F0">query</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"SELECT * FROM users"</span><span style="color:#E1E4E8">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8">results.</span><span style="color:#B392F0">each</span><span style="color:#F97583"> do</span><span style="color:#E1E4E8"> |row|</span></span>
<span class="line"><span style="color:#79B8FF">  puts</span><span style="color:#E1E4E8"> row</span></span>
<span class="line"><span style="color:#F97583">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">rescue</span><span style="color:#79B8FF"> Mysql2</span><span style="color:#E1E4E8">::</span><span style="color:#79B8FF">Error</span><span style="color:#E1E4E8"> => e</span></span>
<span class="line"><span style="color:#79B8FF">  puts</span><span style="color:#9ECBFF"> "Database error: </span><span style="color:#9ECBFF">#{e.</span><span style="color:#B392F0">message</span><span style="color:#9ECBFF">}</span><span style="color:#9ECBFF">"</span></span>
<span class="line"><span style="color:#79B8FF">  puts</span><span style="color:#9ECBFF"> "Error code: </span><span style="color:#9ECBFF">#{e.</span><span style="color:#B392F0">errno</span><span style="color:#9ECBFF">}</span><span style="color:#9ECBFF">"</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">ensure</span></span>
<span class="line"><span style="color:#6A737D">  # Always close connection in ensure block</span></span>
<span class="line"><span style="color:#E1E4E8">  client.</span><span style="color:#B392F0">close</span><span style="color:#F97583"> if</span><span style="color:#E1E4E8"> client</span></span>
<span class="line"><span style="color:#F97583">end</span></span></code></pre> </code> </code> </div> </section> </main> </div> </body></html>