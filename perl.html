<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Perl Cookbook</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <!-- Hightlight -->
    <link rel="stylesheet" href="css/prism.css">
    <script src="css/prism.js"></script>
    <link href="starter-template.css" rel="stylesheet">
    <script referrerpolicy="no-referrer-when-downgrade" type="text/javascript" src="https://api.onelink-preview.com/moxie.min.js" data-oljs="P123E-BDEF-2FE3-FD20"></script>
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="headercontainer">
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Perl</a></li>
            <li><a href="python.html">Python</a></li>
            <li><a href="go.html">Go</a></li>
            <li><a href="articles.html">Articles</a></li>
            <li><a href="reference.html">Reference</a></li>
              <li><a href="rotk.html">ROTK</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container" style="margin-top: 80px">

        <h3 style="text-align:center">Perl</h3>

        <div>Perl is a highly capable, feature-rich programming language with over 36 years of development. Perl runs on over 100 platforms from portables to mainframes and is
            suitable for both rapid prototyping and large scale development projects.</div><br>

        <div class="code-block">
        <p>Get file list : <button class="copy-btn" type="button" aria-label="Copy code">Copy</button></p>
        <pre>
            <code class="language-perl">
            use strict;
            use File::Find;
            use File::Copy;
            use Data::Dumper;
    
            my @FILE_LIST;
    
            # -- main --
            {
              my $sDir = "/home/username";
              my @aFileList = GetFileList($sDir);
            }
    
            # ----------------------------
            sub GetFileList($)
            # ----------------------------
            {
              my $root = shift;
    
              @FILE_LIST = ();
              find(\&filter, $root);
              return @FILE_LIST;
            }
    
            # ----------------------------
            sub filter
            # ----------------------------
            {
              my $root = $File::Find::topdir;
              my $path = $File::Find::name;
              my $file_name = $_;
    
              if( $file_name =~ /\.(cgi|pl)$/i )
              {
                $root =~ s/\\/\\\\/g;
                $path =~ s/^$root[\/\\]//;
                push @FILE_LIST, $path;
              }
            }
            </code>
        </pre>
        </div>
    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
    <script>
  (function () {
    function normalizeText(text) {
      // Trim leading/trailing blank lines and normalize indentation
      const lines = text.replace(/\r\n/g, '\n').split('\n');

      // Drop leading/trailing empty lines
      while (lines.length && lines[0].trim() === '') lines.shift();
      while (lines.length && lines[lines.length - 1].trim() === '') lines.pop();

      // Compute minimal common indent (spaces only; tabs are preserved)
      const indents = lines
        .filter(l => l.trim().length > 0)
        .map(l => l.match(/^(\s*)/)[1].length);
      const minIndent = indents.length ? Math.min.apply(null, indents) : 0;

      return lines.map(l => l.slice(minIndent)).join('\n');
    }

    function copyToClipboard(text) {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        return navigator.clipboard.writeText(text);
      }
      // Fallback for older browsers
      return new Promise(function (resolve, reject) {
        try {
          const ta = document.createElement('textarea');
          ta.value = text;
          ta.style.position = 'fixed';
          ta.style.top = '-1000px';
          ta.setAttribute('readonly', '');
          document.body.appendChild(ta);
          ta.select();
          const ok = document.execCommand('copy');
          document.body.removeChild(ta);
          ok ? resolve() : reject(new Error('execCommand failed'));
        } catch (e) {
          reject(e);
        }
      });
    }

    function showCopied(btn) {
      const original = btn.textContent;
      btn.textContent = 'Copied!';
      btn.disabled = true;
      setTimeout(function () {
        btn.textContent = original;
        btn.disabled = false;
      }, 1200);
    }

    function attachCopyButtons() {
      document.querySelectorAll('.code-block').forEach(function (block) {
        const btn = block.querySelector('.copy-btn');
        const code = block.querySelector('pre > code, code');

        if (!btn || !code) return;

        btn.addEventListener('click', function () {
          const raw = code.textContent;
          const normalized = normalizeText(raw);
          copyToClipboard(normalized)
            .then(function () { showCopied(btn); })
            .catch(function () { btn.textContent = 'Failed'; });
        });
      });
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', attachCopyButtons);
    } else {
      attachCopyButtons();
    }
  })();
</script>
  
  </body>
</html>
